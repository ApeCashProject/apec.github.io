

<html lang="en">
<head>
  <meta charset="utf-8">
    <title>ApeCash Projekt | APEc Selfdrop Center</title>
   
<link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/>

	<style>
      figure img {
        display: block;
        margin: 0 auto;
      }
      pre, .pre  {
        overflow-x: auto;
        overflow-y: hidden;
      }

      code {
        font-family: inconsolata, Menlo, Monaco, Consolas, "Courier New", monospace;
      }

      code {
        padding: 0.2em;
        font-size: 85%;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
      }

      pre code {
        background-color: transparent;
        display: block;
        padding: 1.5em;
        white-space: pre;
        font-size: .875rem;
        line-height: 1.25;
      }

      pre {
        white-space: pre;

        hyphens: none;
        position: relative;
      }

      blockquote {
        margin-top: 0;
        margin-left: 0;
        padding-left: 2rem;
        color: rgba(0, 0, 0, 0.9);
        font-family: athelas, georgia, serif;
        border-width: 0.25rem;
        border-color: #357edd;
        border-left-style: solid;
      }

      cite {
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-style: normal;
      }

      aside {
        position: absolute;
        width: 180px;
        right: -186px;
        font-size: 14px;
        border-left: 1px solid #ccc;
        padding-left: 16px;
      }

      @media (min-width: 960px) {
        .article-container.has-footnotes {
          margin-left: -120px;
          position: relative;
        }
        .footnotes, .footnote-ref {
          display: none;
        }
      }

      @media (max-width: 960px) {
        aside {
          display: none;
        }
      }

      .footnote-ref a, a.footnote-return {
        text-decoration: none;
      }

       
      .mc-banner {
        visibility: hidden !important;
      }
      .mc-modal, .mc-modal-bg {
        visibility: visible !important;
      }

      strong {
        font-weight: 700;
      }

      .sans-serif {
        font-family: Lato, sans-serif;
      }
    </style>


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	crossorigin="anonymous"></script>
  
  </head>

  <body class="w-100 sans-serif bg-white">
   


    <main class="mw7 center" role="main">
      
   <script src="hhttps://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
<script src="https://raw.githubusercontent.com/ethereumjs/browser-builds/master/dist/ethereumjs-all/ethereumjs-all-2017-10-31.min.js"></script>
<script src="https://raw.githubusercontent.com/moment/moment/develop/min/moment.min.js"></script>

<div class="flex-l mt2 w8 center article-container">
<article class="cf pv5 ph3 ph4-ns w-100">
  <header>
    <h1 class="f1 mb1">
      ApeCash Coin Selfdrop Center
    </h1>
  </header>
  <div class="lh-copy fw3 f4 dark-gray">
    <style>
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    to {
      transform:rotate(1turn);
    }
  }
</style>

<div id="spinner" class="mt5">
  <div style="margin: 0px auto; border-radius: 100%; border-width: 3px; border-style: solid; border-color: rgb(33, 150, 243) rgb(238, 238, 238) rgb(238, 238, 238); border-image: initial; width: 32px; height: 32px; animation: spin 0.8s linear infinite;"></div>
  <small class="tc db f6 black-60">Loading...</small>
</div>
<div id="ui" class="dn">
  <p class="mt4">
    Your current ApeCash Coin balance: <span id="owned">0</span> APEc.
    You can redeem APEc tokens in exchange for an ETH donation to project development. One token costs 0.000008 ETH.
  </p>
  <form id="buyForm" class="br2-ns">
    <fieldset class="cf bn ma0 pa0">
      <div class="cf">
        <label class="clip" for="number">Number of tokens you wish</label>
        <input class="f6 f5-l input-reset bn bg-near-white fl black-80 pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns" placeholder="Number of tokens you wish" type="number" name="number" value="100" min="100" id="number">
        <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-green hover-bg-dark-green white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" type="submit" value="Get Tokens">
      </div>
    </fieldset>
  </form>

  <div class="bg-moon-gray br-pill h1 overflow-y-hidden mt3">
    <div id="progress" class="bg-blue br-pill h1" style="width:0px"></div>
  </div>
  <small class="f6 black-60 db mb2 tr"><span id="sold">0</span> of <span id="total">0</span> tokens redeemed so far</small><br />
	<small class="f6 black-60 db mb2">EXAMPLE AMOUNTS: 0.008 ETH = 1,000 APEc | 0.04 ETH = 5,000 APEc | 0.2 ETH = 25,000 APEc | 1 ETH = 125,000 APEc | 4 ETH = 500,000 | 8 ETH = 1000,000<br />IMPORTANT: Click the button "Get token" only once and wait for transaction to be processed in MetaMask. The interface will update automatically.</small>
</div>



<script>
  var minimalTokenABI = [{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"tokens","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"from","type":"address"},{"name":"to","type":"address"},{"name":"tokens","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"_totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"tokenOwner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"acceptOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"tokens","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"spender","type":"address"},{"name":"tokens","type":"uint256"},{"name":"data","type":"bytes"}],"name":"approveAndCall","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"newOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"tokenAddress","type":"address"},{"name":"tokens","type":"uint256"}],"name":"transferAnyERC20Token","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"tokenOwner","type":"address"},{"name":"spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":true,"stateMutability":"payable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"tokens","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"tokenOwner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"tokens","type":"uint256"}],"name":"Approval","type":"event"}];

  var saleABI = [
	{
		"constant": false,
		"inputs": [
			{
				"name": "numberOfTokens",
				"type": "uint256"
			}
		],
		"name": "buyTokens",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "endSale",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "tokensSold",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "tokenContract",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "price",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "_tokenContract",
				"type": "address"
			},
			{
				"name": "_price",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "buyer",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "Sold",
		"type": "event"
	}
];
  var saleAddress = '0xceb3276Fb25EDBBcA9f5918A02ED81f8A6cEFAD3';

  var saleContract = web3.eth.contract(saleABI).at(saleAddress);

  // These values could be determined dynamically at runtime, but they never
  // change, so there's no harm in hard-coding them, and it saves us network
  // round-trips.
  var tokenAddress = '0xc956fdb88d2e5b71e22d63313624e42d4757e7f9';
  var tokenContract = web3.eth.contract(minimalTokenABI).at(tokenAddress);
  var decimals = 18;
  var price = 8000000000000;

  // "Animate" by changing the text with each animation step.
  function animateTo(el, value) {
    $({ number: parseFloat(el.text().replace(/[^\d.]/g, '')) }).animate(
      { number: value },
      {
        step: function () {
          el.text(Math.floor(this.number).toLocaleString());
        },
        complete: function () {
          el.text(this.number.toLocaleString());
        },
      });
  }

  var start = +(new Date());
  function updateUI(owned, sold, remaining) {
    // Delay first UI update until the spinner has been visible for 1 second.
    if (+(new Date()) - start < 1000) {
      return window.setTimeout(function () {
        updateUI(owned, sold, remaining);
      }, 1000 - +(new Date()) + start);
    }

    // sold and total are both BigNumbers
    var total = sold.plus(remaining);

    $('#ui').show();
    $('#spinner').hide();
    animateTo($('#owned'), owned.toNumber());
    animateTo($('#sold'), sold.toNumber());
    animateTo($('#total'), total.toNumber());
    $('#price')
    $('#progress').animate({
      // Safe BigNumber math
      width: Math.round(sold.mul(100).div(total).toNumber()).toString() + '%',
    });
  }

  $('#buyForm').submit(function (e) {
    // Prevent the browser from POSTing the form.
    e.preventDefault();

    var numberOfTokens = web3.toBigNumber($('#number').val());
    saleContract.buyTokens.sendTransaction(numberOfTokens, {
      value: numberOfTokens.mul(price),
    }, function () {
      // Nothing to do here. If the transaction is successful, it will trigger
      // events that we're already monitoring.
    });
  });

  function loadData(blockNumber) {
    log("Loading data from contracts...")

    var balance, sold, remaining;

    // Callback that waits for all three pieces of data before proceeding
    function updateWhenDone() {
      if (balance !== undefined && sold !== undefined &&
          remaining !== undefined) {
        log("Updating UI.");
        updateUI(balance.div(10**decimals), sold, remaining.div(10**decimals));
      }
    }

    // Fetch in parallel
    // User's balance
    tokenContract.balanceOf.call(web3.eth.defaultAccount, {}, blockNumber,
      function (err, _balance) {
        if (err) return error(err);
        balance = _balance;
        updateWhenDone();
      });
    // Tokens sold so far
    saleContract.tokensSold.call({}, blockNumber,
      function (err, _sold) {
        if (err) return error(err);
        sold = _sold;
        updateWhenDone();
      });
    // Remaining inventory (sale contract's balance)
    tokenContract.balanceOf.call(saleAddress, {}, blockNumber,
      function (err, _remaining) {
        if (err) return error(err);
        remaining = _remaining;
        updateWhenDone();
      });
  }

  function initialize() {
    web3.eth.getBlockNumber(function (err, lastSeenBlock) {
      // Load data for the initial block
      loadData(lastSeenBlock);

      // Handler for events that necessitate a UI update
      function changeHandler(err, data) {
        if (err) return error(err);

        // Only if we haven't already fetched data for this block
        if (data.blockNumber > lastSeenBlock) {
          lastSeenBlock = data.blockNumber;
          loadData(lastSeenBlock);
        }
      }

      // The Sold event tells us when the number of sold tokens changes.
      saleContract.Sold(changeHandler);

      // We display the user's balance as well as the sale contract's
      // balance, so we need to monitor transfers to both.
      tokenContract.Transfer({
        to: [ saleAddress, web3.eth.defaultAccount ]
      }, changeHandler);

      // To display an accurate balance, we also need to monitor transfers out
      // of the user's account.
      tokenContract.Transfer({
        from: web3.eth.defaultAccount
      }, changeHandler);
    });
  }

  $(function () {
    if (typeof(web3) === "undefined") {
      error("Unable to find web3. " +
      "Please run MetaMask (or something else that injects web3).");
    } else {
      log("Found injected web3.");
      web3 = new Web3(web3.currentProvider);
      if (web3.version.network != 1) {
        error("Wrong network detected. Please switch to the Ethereum Mainnet.");
      } else {
        log("Connected to the Ethereum Mainnet.");
        if (web3.eth.defaultAccount === undefined) {
          error("No accounts found. If you're using MetaMask, " +
  				      "please unlock it first.");
        } else {
          initialize();
        }
        var initialAccount = web3.eth.defaultAccount;
        window.setInterval(function () {
          if (web3.eth.defaultAccount !== initialAccount) {
            window.location.reload();
          }
        }, 500);
      }
    }
  });
</script>

  </div>
</article>
</div>

<h2>Log</h2>
<div class="code f6 lh-solid overflow-auto ph3 ba b--moon-gray" style="height:16em" id="log">
</div>
<script>
	function log(message) {
		$('#log').append($('<p>').text(message));
		$('#log').scrollTop($('#log').prop('scrollHeight'));
	}

	function error(message) {
		$('#log').append($('<p>').addClass('dark-red').text(message));
		$('#log').scrollTop($('#log').prop('scrollHeight'));
	}

	function waitForReceipt(hash, cb) {
		web3.eth.getTransactionReceipt(hash, function (err, receipt) {
			if (err) {
				error(err);
			}

			if (receipt !== null) {
				
				if (cb) {
					cb(receipt);
				}
			} else {
				
				window.setTimeout(function () {
					waitForReceipt(hash, cb);
				}, 1000);
			}
		});
	}
</script>
	    
	    <div class="flex items-center justify-center pa4 bg-lightest-blue navy mt4">

    <span class="lh-title ml3"><strong>NOTE</strong>: Due to a bug in MetaMask, events may not work after switching networks (e.g. from the main network to the Ropsten test network). If you experience this, you need to restart the browser after switching to the desired network.</span>
  </div>

    </main>
    
  </body>
</html>
